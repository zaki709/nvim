# zaki-nvim ユーザーマニュアル

![LazyVim](../image/zaki_dashboard_header.png)

## 概要

これは**LazyVim**をベースとした個人用Neovim設定で、日本語サポート、最新の開発ツール、AI支援コーディング機能を備えています。生産性、美観、シームレスな開発ワークフローに重点を置いた設定となっています。

## はじめに

### 前提条件
- Neovim 0.9.0以上
- Git
- True Color対応ターミナル
- Nerd Font（アイコン表示に推奨）

### インストール
1. 既存のNeovim設定をバックアップ
2. この設定を`~/.config/nvim`にクローン
3. Neovimを起動 - プラグインが自動的にインストールされます

## 主な機能

### 🎨 テーマシステム
- **Cyberdreamテーマ**: カスタマイズ可能な未来的カラースキーム
- **ライト/ダークモード切り替え**: `<leader>ct`でテーマを切り替え
- **自動モード検出**: システムテーマ設定を尊重

### ⌨️ カスタムキーバインド
- **jj**: インサートモードからの高速脱出
- **日本語入力サポート**: 日本語開発に最適化されたUTF-8
- **カスタムリーダーマッピング**: 効率的なワークフローショートカット

### 🔧 開発ツール
- **LSP統合**: Masonによる言語サーバーサポート
- **自動補完**: nvim-cmpによるインテリジェントコード補完
- **Git統合**: 複数ツールによる強化されたGitワークフロー
- **ファイルエクスプローラー**: モダンインターフェースのNeo-tree

## キーバインド リファレンス

### **基本ショートカット**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `jj` | Insert | ノーマルモードに戻る |
| `<leader>ct` | Normal | ライト/ダークテーマ切り替え |
| `<C-s>` | Normal | ファイル保存 |
| `<leader>qq` | Normal | 全て終了 |

### **ナビゲーション**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `<C-h>` | Normal | 左のウィンドウに移動 |
| `<C-j>` | Normal | 下のウィンドウに移動 |
| `<C-k>` | Normal | 上のウィンドウに移動 |
| `<C-l>` | Normal | 右のウィンドウに移動 |
| `<S-h>` | Normal | 前のバッファ |
| `<S-l>` | Normal | 次のバッファ |

### **ファイル操作**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `<leader><space>` | Normal | ファイル検索 |
| `<leader>ff` | Normal | ファイル検索（ルートディレクトリ） |
| `<leader>fb` | Normal | バッファ検索 |
| `<leader>fn` | Normal | 新規ファイル作成 |
| `<leader>cp` | Normal | ファイルパスをコピー |

### **検索と置換**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `<leader>/` | Normal | プロジェクト内検索 |
| `<leader>sr` | Normal | 検索と置換 |
| `<leader>sk` | Normal | キーマップ検索 |

### **コードナビゲーション**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `gd` | Normal | 定義に移動 |
| `gr` | Normal | 参照に移動 |
| `K` | Normal | ホバー情報表示 |
| `<leader>ca` | Normal | コードアクション |
| `<leader>cr` | Normal | シンボル名変更 |
| `<leader>cf` | Normal | コードフォーマット |

### **Git操作**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `<leader>gg` | Normal | Lazygitを開く |
| `<leader>gy` | Normal | Gitリンクをコピー |
| `<leader>go` | Normal | GitHubで開く |
| `<leader>gb` | Normal | Git blame |
| `]h` / `[h` | Normal | 次/前のGitハンク |

### **ウィンドウ管理**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `<leader>-` | Normal | 水平分割 |
| `<leader>\|` | Normal | 垂直分割 |
| `<leader>wd` | Normal | ウィンドウを閉じる |
| `<C-Up/Down/Left/Right>` | Normal | ウィンドウサイズ変更 |

### **診断とエラー**
| キーバインド | モード | 説明 |
|-------------|------|-----|
| `]d` / `[d` | Normal | 次/前の診断 |
| `]e` / `[e` | Normal | 次/前のエラー |
| `<leader>xx` | Normal | 診断切り替え |
| `<leader>cd` | Normal | 診断表示 |

## プラグイン概要

### 🎨 UIプラグイン
- **Alphaダッシュボード**: zakiヘッダー付きカスタムスタートアップ画面
- **Cyberdreamテーマ**: ライト/ダークバリアント付きメインカラースキーム
- **Lualine**: GitとLSP情報付きステータスライン
- **Neo-tree**: Git統合ファイルエクスプローラー
- **HLChunk**: 視覚的インデントガイド

### ⚡ エディター拡張
- **Comment.nvim**: `gcc`と`gc`によるスマートコメント
- **TreeSJ**: `<space>m`によるコードブロック分割/結合
- **Copy File Path**: `<leader>cp`による高速パスコピー
- **Flash**: `s`と`S`による高速ナビゲーション

### 🔧 開発ツール
- **Mason**: 言語サーバーインストーラーとマネージャー
- **nvim-lspconfig**: 言語サーバー設定
- **nvim-cmp**: 自動補完エンジン
- **Copilot**: AI駆動コード提案
- **Colorizer**: CSSカラープレビュー

### 📚 Git統合
- **GitLinker**: `<leader>gy`によるGitHubリンク生成
- **Diffview**: 強化されたdiff表示
- **Gitsigns**: サインカラムのGitステータス

## AI支援

### GitHub Copilot
- **自動提案**: AI駆動コード補完
- **タブ補完**: `<Tab>`で提案を受け入れ
- **日本語サポート**: 日本語コメントとテキストに最適化

### Avante（現在無効）
AvanteのAIアシスタントはパフォーマンスのため無効化されていますが、設定は保持されています。再有効化するには：
1. `lua/plugins/avante.lua`を編集
2. `enabled = false`を`enabled = true`に変更
3. Neovimを再起動

## テーマカスタマイズ

### ライト/ダークモード切り替え
`<leader>ct`を使用してライトモードとダークモードを切り替えます。テーマは自動的に調整されます：
- **ダークモード**: 暗い背景に白いテキスト
- **ライトモード**: 明るい背景に暗いテキスト

### カスタムカラー
cyberdreamテーマは`lua/plugins/colorscheme.lua`の設定を通じて広範囲なカスタマイズをサポートしています。

## 日本語サポート

### エンコーディング
- UTF-8エンコーディングがデフォルトで設定
- 日本語テキスト編集に最適化
- 日本語言語サポート用に設定されたCopilot

### 入力方法
- システム入力方法と連携
- 日本語文字の適切なレンダリング
- 混在言語コンテンツに最適化された行番号

## トラブルシューティング

### プラグインの問題
1. **プラグインが読み込まれない**: `:Lazy`でエラーを確認
2. **起動が遅い**: プラグインの遅延読み込み設定を確認
3. **テーマが切り替わらない**: 透明背景が無効になっていることを確認

### パフォーマンス
- プラグインは最適な遅延読み込みに設定
- 無効化されたランタイムプラグインが起動時間を改善
- `:Lazy profile`でプラグイン読み込み時間を分析

### 言語サーバー
1. **LSPが動作しない**: `:Mason`で言語サーバーをインストール
2. **補完の問題**: `:LspInfo`でサーバーステータスを確認
3. **フォーマットの問題**: Masonでフォーマッターのインストールを確認

## 設定ファイル

### 主要ファイル
- `init.lua`: エントリーポイント、lazy.nvimを読み込み
- `lua/config/`: コア設定（キーマップ、オプション、lazy設定）
- `lua/plugins/`: 個別プラグイン設定
- `docs/`: ドキュメントとマニュアル

### カスタマイズ
1. **キーマップ**: `lua/config/keymaps.lua`を編集
2. **オプション**: `lua/config/options.lua`を変更
3. **プラグイン**: `lua/plugins/`にファイルを追加/変更
4. **テーマ**: `lua/plugins/colorscheme.lua`をカスタマイズ

## ヒントとベストプラクティス

### ワークフロー最適化
1. 高速ファイルアクセスに`<leader><space>`を使用
2. 高速モード切り替えに`jj`を活用
3. シームレスなバージョン管理にGit統合を使用
4. コードナビゲーションにLSP機能を活用

### プラグイン管理
1. `:Lazy update`でプラグインを定期的に更新
2. `:Lazy clean`で未使用プラグインをクリーンアップ
3. プラグイン設定を定期的に確認
4. `:Lazy profile`で起動パフォーマンスをモニター

### カスタマイズ
1. `keymaps.lua`で個人的なキーマップを作成
2. カラースキーム設定でテーマカラーを調整
3. `lua/plugins/`にファイルを作成して新しいプラグインを追加
4. 既存のプラグインパターンをテンプレートとして使用

## サポートとリソース

- **LazyVimドキュメント**: https://www.lazyvim.org/
- **Neovimドキュメント**: https://neovim.io/doc/
- **プラグインリポジトリ**: 個別プラグインのGitHubリポジトリ
- **設定リファレンス**: 技術的詳細はCLAUDE.mdファイルを参照